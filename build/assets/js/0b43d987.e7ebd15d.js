"use strict";(self.webpackChunksoftware_designs_and_algorithms=self.webpackChunksoftware_designs_and_algorithms||[]).push([[9137],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,m=u["".concat(l,".").concat(d)]||u[d]||h[d]||r;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3885:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=n(7462),a=(n(7294),n(3905));const r={sidebar_position:5},i="4. The Law of Demeter",s={unversionedId:"building-blocks-of-oop-part-2/the_law_of_demeter",id:"building-blocks-of-oop-part-2/the_law_of_demeter",title:"4. The Law of Demeter",description:"The purpose of the law of Demeter is lower cohesion. The low cohesion shows that the design is of good quality. In short, the law of Demeter sounds like this:",source:"@site/docs/3-building-blocks-of-oop-part-2/the_law_of_demeter.md",sourceDirName:"3-building-blocks-of-oop-part-2",slug:"/building-blocks-of-oop-part-2/the_law_of_demeter",permalink:"/docs/building-blocks-of-oop-part-2/the_law_of_demeter",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"3. Mixins",permalink:"/docs/building-blocks-of-oop-part-2/mixins"},next:{title:"5. Design by Contract",permalink:"/docs/building-blocks-of-oop-part-2/desing_by_contract"}},l={},c=[{value:"4.1 Avoiding violations",id:"41-avoiding-violations",level:2}],p={toc:c},u="wrapper";function h(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"4-the-law-of-demeter"},"4. The Law of Demeter"),(0,a.kt)("p",null,"The purpose of the law of Demeter is lower cohesion. The low cohesion shows that the design is of good quality. In short, the law of Demeter sounds like this:"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Only talk to your immediate neighbors, or in other words: use only one dot.")),(0,a.kt)("p",null,"Some violations of the Law of Demeter are harmless, although others are a sign that the public interface has not been segregated correctly or has not been segregated at all."),(0,a.kt)("p",null,"Imagine that Trip has a function that checks whether the tire is pumped up or not, ask if the wheel is spinning, and so on. Each line contains a large number of points for accessing internal properties. This may be an indication that ",(0,a.kt)("strong",{parentName:"p"},"the Law of Demeter")," has been violated."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Listing 4.1"',title:'"Listing','4.1"':!0},"1. customer.bicycle.wheel.tire();\n2. customer.bicycle.wheel.rotate();\n3. Object.keys(...).sort(...).join(',');\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If wheel changes tire or rotate, depart may have to change. Trip has nothing to do with wheel, yet changes to wheel might force changes in Trip. This unnecessarily raises the cost of change; the code is not reasonable."),(0,a.kt)("li",{parentName:"ul"},"Changing tire or rotate may break something in depart. Because Trip is distant and apparently unrelated, the failure will be completely unexpected. This code is not transparent."),(0,a.kt)("li",{parentName:"ul"},"Trip cannot be reused unless it has access to a customer with a bicycle that has a wheel and a tire. It requires a lot of context and is not easily usable."),(0,a.kt)("li",{parentName:"ul"},"This pattern of messages will be replicated by others, producing more code with similar problems. This style of code, unfortunately, breeds itself. It is not exemplary.")),(0,a.kt)("p",null,"The third line of messages is perfectly reasonable and does not violate the Law of Demeter."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Object.keys()")," returns an Array."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Object.keys().sort()")," also returns an Array."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Object.keys().sort().join()")," returns a String.")),(0,a.kt)("p",null,"It is also quite normal if you are working with a data structure that has a lot of innateness, but you also need to be careful here."),(0,a.kt)("h2",{id:"41-avoiding-violations"},"4.1 Avoiding violations"),(0,a.kt)("p",null,"One example of how you can avoid unnecessary dependency."),(0,a.kt)("p",null,"We have a ",(0,a.kt)("strong",{parentName:"p"},"User")," who have ",(0,a.kt)("strong",{parentName:"p"},"Account")," and this account has a plan and User has ",(0,a.kt)("strong",{parentName:"p"},"discountedPlanPrice")," which violate the Law of Demeter."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Listing 4.2"',title:'"Listing','4.2"':!0},"abstract class User {\n   private account: Account;\n\n    discountedPlanPrice(coupon: Coupon) {\n        return coupon.discount(\n            this.account.getPlan().getPrice(),\n        );\n    };\n}\n\nclass Account {\n    private plan: Plan;\n\n    getPlan() {\n        return this.plan;\n    };\n}\n")),(0,a.kt)("p",null,"One of the common ways to remove such chains is by using delegation. A wrapper method encapsulates or hides knowledge that would otherwise be implemented in the message chain."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Listing 4.3"',title:'"Listing','4.3"':!0},"class Account {\n    private plan: Plan;\n\n    discountedPlanPrice(coupon) {\n        return coupon.discount(this.plan.getPrice());\n    };\n}\n")),(0,a.kt)("p",null,"To avoid such problems, you need to think over the application architecture in advance."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Delegation is an effective technique to avoid Law of Demeter violations, but only for behavior, not for attributes.")))}h.isMDXComponent=!0}}]);